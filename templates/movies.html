{% extends 'base.html' %}

{% block title %}Filme von {{ user.name }} - MoviWeb{% endblock %}

{% block content %}
    <a href="{{ url_for('home') }}">&larr; Zurück zur Nutzerübersicht</a>
    <h1>Lieblingsfilme von {{ user.name }}</h1>

    <hr>
    <h2>Neuen Film hinzufügen</h2>
    <form action="{{ url_for('add_movie', user_id=user.id) }}" method="post">
        <label for="title">Filmtitel:</label>
        <input type="text" id="title" name="title" required>
        <button type="submit">Suchen & Hinzufügen</button>
    </form>
    <hr>

    {% for movie in movies %}
        <div>
            <h3>{{ movie.name }} ({{ movie.year }})</h3>
            <p>Regisseur: {{ movie.director }}</p>
            {% if movie.poster_url and movie.poster_url != 'N/A' %}
                <img src="{{ movie.poster_url }}" alt="Poster von {{ movie.name }}" width="150">
            {% endif %}
        </div>
        <hr>
    {% else %}
        <p>Dieser Nutzer hat noch keine Lieblingsfilme hinzugefügt.</p>
    {% endfor %}
{% endblock %}